<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>SSH - Learn Code Stream</title><meta name=description content="VMware vRealize Automation"><meta name=generator content="Hugo 0.83.1"><link href=https://learncodestream.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://learncodestream.github.io/pipelines/tasks/ssh/><link rel=stylesheet href=https://learncodestream.github.io/css/theme.css><link rel=stylesheet href=/css/lightbox.min.css><link rel=stylesheet href=/css/custom.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://learncodestream.github.io/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script src=https://learncodestream.github.io/js/bundle.js></script><script src=/js/lightbox.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-NN4VBNXV6M"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-NN4VBNXV6M')</script><style>:root{--custom-font-color:#0065ab;--custom-background-color:#FFFFFF}</style><meta property="og:title" content="SSH"><meta property="og:description" content="The SSH task is similar in many ways to the CI  and powershell  tasks - it allows you to execute code on a remote machine, in this case over SSH. The task can authenticate with username and password, or a private key.
 Host - the IP or FQDN of the SSH host Username - the username to authenticate to the SSH host Passsword - the password to authenticate to the SSH host -or- Private Key and Passphrase - the private key and passphrase for the private key to authenticate to the SSH host Environment variables - can be used to make pipeline variables available to the SSH host script execution, if needed Script - the shell script to execute on the SSH host Arguments - arguments for the shell execution Working Directory - the directory in which to execute the script (defaults to the users home directory, if not specified)   An example SSH task configuration  To use an SSH key to connect to the SSH host, the key must be a PEM encoded RSA key (it should start with ---begin rsa private key----)."><meta property="og:type" content="article"><meta property="og:url" content="https://learncodestream.github.io/pipelines/tasks/ssh/"><meta property="og:image" content="https://learncodestream.github.io/images/vra-code-stream-logo.png"><meta property="article:section" content="Pipelines"><meta property="article:modified_time" content="2022-04-26T14:56:20+01:00"><meta property="og:site_name" content="Learn Code Stream"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://learncodestream.github.io/images/vra-code-stream-logo.png"><meta name=twitter:title content="SSH"><meta name=twitter:description content="The SSH task is similar in many ways to the CI  and powershell  tasks - it allows you to execute code on a remote machine, in this case over SSH. The task can authenticate with username and password, or a private key.
 Host - the IP or FQDN of the SSH host Username - the username to authenticate to the SSH host Passsword - the password to authenticate to the SSH host -or- Private Key and Passphrase - the private key and passphrase for the private key to authenticate to the SSH host Environment variables - can be used to make pipeline variables available to the SSH host script execution, if needed Script - the shell script to execute on the SSH host Arguments - arguments for the shell execution Working Directory - the directory in which to execute the script (defaults to the users home directory, if not specified)   An example SSH task configuration  To use an SSH key to connect to the SSH host, the key must be a PEM encoded RSA key (it should start with ---begin rsa private key----)."><meta itemprop=name content="SSH"><meta itemprop=description content="The SSH task is similar in many ways to the CI  and powershell  tasks - it allows you to execute code on a remote machine, in this case over SSH. The task can authenticate with username and password, or a private key.
 Host - the IP or FQDN of the SSH host Username - the username to authenticate to the SSH host Passsword - the password to authenticate to the SSH host -or- Private Key and Passphrase - the private key and passphrase for the private key to authenticate to the SSH host Environment variables - can be used to make pipeline variables available to the SSH host script execution, if needed Script - the shell script to execute on the SSH host Arguments - arguments for the shell execution Working Directory - the directory in which to execute the script (defaults to the users home directory, if not specified)   An example SSH task configuration  To use an SSH key to connect to the SSH host, the key must be a PEM encoded RSA key (it should start with ---begin rsa private key----)."><meta itemprop=dateModified content="2022-04-26T14:56:20+01:00"><meta itemprop=wordCount content="552"><meta itemprop=image content="https://learncodestream.github.io/images/vra-code-stream-logo.png"><meta itemprop=keywords content></head><body><div class=container><header><div class=header-image><img src=/images/vra-code-stream-logo.png alt="Learn Code Stream"></div><div class=header><div class=header-h1><h1 class=header-h1>Learn Code Stream</h1></div><div class=header-description><p class=description>VMware vRealize Automation</p></div></div></header><div class=content-container><main><h1>SSH</h1><p>The SSH task is similar in many ways to the <a href=/pipelines/tasks/ci>CI</a> and <a href=/pipelines/tasks/powershell>powershell</a> tasks - it allows you to execute code on a remote machine, in this case over SSH. The task can authenticate with username and password, or a private key.</p><ul><li><strong>Host</strong> - the IP or FQDN of the SSH host</li><li><strong>Username</strong> - the username to authenticate to the SSH host</li><li><strong>Passsword</strong> - the password to authenticate to the SSH host -or-</li><li><strong>Private Key and Passphrase</strong> - the private key and passphrase for the private key to authenticate to the SSH host</li><li><strong>Environment variables</strong> - can be used to make pipeline variables available to the SSH host script execution, if needed</li><li><strong>Script</strong> - the shell script to execute on the SSH host</li><li><strong>Arguments</strong> - arguments for the shell execution</li><li><strong>Working Directory</strong> - the directory in which to execute the script (defaults to the users home directory, if not specified)</li></ul><div class=clr-content-image-wrap><a href=ssh-task-config.png data-lightbox=page-images data-title="An example SSH task configuration"><img src=ssh-task-config.png alt="An example SSH task configuration"></a><figcaption class=clr-caption>An example SSH task configuration</figcaption></div><p>To use an SSH key to connect to the SSH host, the key must be a PEM encoded RSA key (it should start with <code>---begin rsa private key----</code>). it&rsquo;s recommended to generate a key specifically for codestream and store the key in a <a href=/configure/variables>variable
</a>. You can enter a passphrase for additional security.</p><p>The following example generates a key pair called <code>id_codestream</code>. It is executed on the SSH host under the user profile that will be used to connect (<code>autotmm</code>)</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell><span class=c1># Generate the rsa key-pair</span>
autotmm@smcg-sc2-docker-host:~$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key <span class=o>(</span>/home/autotmm/.ssh/id_rsa<span class=o>)</span>: /home/autotmm/.ssh/id_codestream
Enter passphrase <span class=o>(</span>empty <span class=k>for</span> no passphrase<span class=o>)</span>: ***********
Enter same passphrase again: ***********
Your identification has been saved in /home/autotmm/.ssh/id_codestream.
Your public key has been saved in /home/autotmm/.ssh/id_codestream.pub.
The key fingerprint is:
SHA256:WJv9OkQ+byQmI5XePG+/FjlHxVt3B6JS0ptzXKJ0/uw autotmm@smcg-sc2-docker-host
The key<span class=err>&#39;</span>s randomart image is:
+---<span class=o>[</span>RSA 2048<span class=o>]</span>----+
<span class=p>|</span>        ... . .o <span class=p>|</span>
<span class=p>|</span>         oo.o.. B<span class=p>|</span>
<span class=p>|</span>        oo.B o  B<span class=p>|</span>
<span class=p>|</span>       <span class=nv>oo</span><span class=o>=</span>* +  ..<span class=p>|</span>
<span class=p>|</span>      .oS<span class=o>=</span>.o o o <span class=p>|</span>
<span class=p>|</span>      . + X.. * .<span class=p>|</span>
<span class=p>|</span>       . <span class=o>=</span> B.. + <span class=p>|</span>
<span class=p>|</span>          ..<span class=o>=</span> E  <span class=p>|</span>
<span class=p>|</span>          .+ oo. <span class=p>|</span>
+----<span class=o>[</span>SHA256<span class=o>]</span>-----+

<span class=c1># Add the new SSH key to the SSH agent</span>
autotmm@smcg-sc2-docker-host:~$ ssh-add ~/.ssh/id_codestream
Identity added: /home/autotmm/.ssh/id_codestream <span class=o>(</span>/home/autotmm/.ssh/id_codestream<span class=o>)</span>

<span class=c1># Add the SSH public key to the authorized_keys file</span>
autotmm@smcg-sc2-docker-host:~$ cat ~/.ssh/id_codestream.pub &gt;&gt; ~/.ssh/authorized_keys
</code></pre></div><p>The contents of <code>id_codestream</code> can then be used in the SSH task (along with the passphrase, if used) to connect to the SSH server.</p><div class=clr-content-image-wrap><a href=ssh-task-key.png data-lightbox=page-images data-title="Using an SSH key to connect"><img src=ssh-task-key.png alt="Using an SSH key to connect"></a><figcaption class=clr-caption>Using an SSH key to connect</figcaption></div><blockquote class="gdoc-hint warning">Secret <a href=/configure/variables>Variables</a> should be used for authentication parameters to ensure they&rsquo;re kept secret and hidden from logs</blockquote><h2 id=script-response-file>Script Response File</h2><p>The script response file is the method for making information from an SSH task available to subsequent Pipeline Tasks. Values written to <code>$SCRIPT_RESPONSE_FILE</code> in the script will be available in the <code>${Stage.SSHTask.output.response}</code> variable, or the response file itself can be found using the <code>responseFilePath</code> parameter.</p><blockquote class="gdoc-hint info"><p>To make multiple response properties available you can create a JSON string with property names and values and write this to the <code>$SCRIPT_RESPONSE_FILE</code>. Subsequent tasks can access the properties as sub-properties of the <code>${Stage.SSHTask.output.response}</code> output.</p><p>For example, writing the below JSON string to the script response file means that the values of <code>test1</code> and <code>test2</code> can be accessed later using <code>${Stage.SSHTask.output.response.test1}</code> and <code>${Stage.SSHTask.output.response.test2}</code></p><div class=clr-content-image-wrap><a href=response-json.png data-lightbox=page-images data-title="Writing JSON to the script response file"><img src=response-json.png alt="Writing JSON to the script response file"></a><figcaption class=clr-caption>Writing JSON to the script response file</figcaption></div></blockquote><h2 id=output-parameters>Output Parameters</h2><ul><li><code>status</code></li><li><code>userFolder</code></li><li><code>response</code></li><li><code>responseFilePath</code></li><li><code>errorMessage</code></li><li><code>logFilePath</code></li><li><code>exitCode</code></li><li><code>scriptExecutionId</code></li><li><code>completed</code></li><li><code>error</code></li><li><code>logs</code></li><li><code>errorFilePath</code></li></ul><div class=edit-meta>Last updated on 26 Apr 2022<br><a href=https://github.com/cmbu-tmm-sites/learncodestream/edit/main/content/Pipelines/Tasks/SSH/index.md class=edit-page><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://learncodestream.github.io/pipelines/tasks/rest/ title=REST><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - REST</a>
<a class="nav nav-next" href=https://learncodestream.github.io/pipelines/tasks/user-operation/ title="User Operation">Next - User Operation <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme adapted from <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://learncodestream.github.io>Home</a></li><li><a href=https://learncodestream.github.io/getting-started/>Getting Started</a></li><li><a href=https://learncodestream.github.io/dashboards/>Dashboards</a></li><li><a href=https://learncodestream.github.io/executions/>Executions</a></li><li><a href=https://learncodestream.github.io/user-operations/>User Operations</a></li><li class="parent has-sub-menu"><a href=https://learncodestream.github.io/pipelines/>Pipelines<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/pipelines/stages/>Stages</a></li><li class="parent has-sub-menu"><a href=https://learncodestream.github.io/pipelines/tasks/>Tasks<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/pipelines/tasks/bamboo/>Bamboo</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/ci/>CI</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/condition/>Condition</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/custom/>Custom</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/jenkins/>Jenkins</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/kubernetes/>Kubernetes</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/pipeline/>Pipeline</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/poll/>Poll</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/powershell/>PowerShell</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/rest/>REST</a></li><li class=active><a href=https://learncodestream.github.io/pipelines/tasks/ssh/>SSH</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/user-operation/>User Operation</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/cloud-template/>VMware Cloud Template</a></li><li><a href=https://learncodestream.github.io/pipelines/tasks/vrealize-orchestrator/>vRealize Orchestrator</a></li></ul></li></ul></li><li><a href=https://learncodestream.github.io/custom-integrations/>Custom Integrations</a></li><li class=has-sub-menu><a href=https://learncodestream.github.io/configure/>Configure<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/configure/projects/>Projects</a></li><li class=has-sub-menu><a href=https://learncodestream.github.io/configure/endpoints/>Endpoints<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/configure/endpoints/bamboo/>Bamboo</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/docker/>Docker</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/docker-registry/>Docker Registry</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/email/>Email</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/gerrit/>Gerrit</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/git/>Git</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/jenkins/>Jenkins</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/jira/>Jira</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/kubernetes/>Kubernetes</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/tfs/>TFS</a></li><li><a href=https://learncodestream.github.io/configure/endpoints/vrealize-orchestrator/>vRealize Orchestrator</a></li></ul></li><li><a href=https://learncodestream.github.io/configure/variables/>Variables</a></li></ul></li><li class=has-sub-menu><a href=https://learncodestream.github.io/triggers/>Triggers<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/triggers/gerrit/>Gerrit</a></li><li><a href=https://learncodestream.github.io/triggers/git/>Git</a></li><li><a href=https://learncodestream.github.io/triggers/docker/>Docker</a></li></ul></li><li class=has-sub-menu><a href=https://learncodestream.github.io/learn-in-5/>Learn in 5<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learncodestream.github.io/learn-in-5/adding-a-kubernetes-endpoint/>Adding a Kubernetes Endpoint</a></li><li><a href=https://learncodestream.github.io/learn-in-5/publishing-preserved-artifacts/>Publishing Preserved Artifacts</a></li><li><a href=https://learncodestream.github.io/learn-in-5/slack-notifications/>Slack Notifications</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>